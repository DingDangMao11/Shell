#  sed  [选项-参数]  '定位行command'   文件

http://blog.51cto.com/13466287/2066532


### sed的常用参数有：
```
-n 屏蔽默认输出；如果不加-n选项会全部输出文本满足条件的行再重复输出

-r 如果使用扩展正则，则需要添加-r选项，默认不支持扩展正则，只支持标准正则

-i 直接修改源文件；不加-i只会在屏幕临时输出不会修改源文件，一般测试过命令无误才会在脚本中使用-i选项

```


sed的编辑指令：
```
p 输出

命令 	   完整示例 	                                   说明
  p 	     sed  -n 'p' 1.txt 	                      输出1.txt的所有行
  
  2p 	     sed -n '2p' 1.txt                     	 输出1.txt的第二行
  
2，5p 	    sed -n '2，5p' 1.txt 	                 输出1.txt的第二行到第五行

2，+5p 	sed -n '2，+5p' 1.txt 	                  输出1.txt的第二行和第二行以后的5行

1～2p 	    sed -n '1～2p' 1.txt 	                        输出第一行，每隔两行输出一行，也就是输出奇数行

2～2p 	    sed -n '1～2p' 1.txt                       	输出第二行，每隔两行输出一行，也就是输出偶数数行

/正则/p 	sed -n '/^[0-9]/p' 1.txt 	              输出1.txt以数字开头的行

$= 	      sed -n '$=' 1.txt 	                    输出1.txt的行数
```

```
d 删除
命令 	        完整示例 	                               说明

2d 	          sed '2d' 1.txt 	                     删除1.txt的第二行

2，5d 	        sed '2，5d' 1.txt 	                            删除1.txt的第二行到第五行

2，+5d 	      sed '2，+5d' 1.txt 	                      删除1.txt的第二行和第二行以后的5行

$d 	          sed '$d' 1.txt 	                              删除1.txt的最后一行行

/正则/ 	        sed '/^[0-9]/d' 1.txt 	                       删除以数字开始的行

！              	sed '/^[0-9]/!d' 1.txt 	                           删除不是以数字开头的行

^$ 	               sed '^$' 1.txt 	                                  删除1.txt的空行
```

s 替换
命令 	完整示例 	说明
s/old/new/ 	sed 's/old/new/' 1.txt 	删除1.txt中每行的第一个old都替换成new
s/old/new/2 	sed 's/old/new/' 1.txt 	删除1.txt中每行的第二个old都替换成new
s/old/new/g 	sed 's/old/new/g' 1.txt 	删除1.txt中每行的每一个old都替换成new
s/old// 	sed 's/old//' 1.txt 	删除1.txt中每行的第一个old都替换成空也就是把old删除
s/old/&s/ 	sed 's/old/&s/' 1.txt 	删除1.txt中每行的第一个old都替换成olds &代表前面查找的字符串
4，7s/^/#/ 	sed '4,7s/^/#/' 1.txt 	删除1.txt中4-7行开头加上# 也就是批量添加注释
4，7s/^#an/an/ 	sed '4,7s/^#an/an/' 1.txt 	删除1.txt中4-7行以#an开头的行去掉#

替换中s///可以用其他三个相同的符号代替如s### s&&& s999 都可以 这样的符号在替换路径的时候经常用到
i/a/c插入
命令 	完整示例 	说明
行号 i 	sed '2i123' 1.txt 	在1.txt的第二行前面插入123
正则 i 	sed '/^[0-9]/i123' 1.txt 	在1.txt中所有数字开头的行前面插入123
a 	在行后插入 	命令格式和i相同
c 	替换该行 	命令格式和i相同
sed高级应用
命令 	完整示例 	说明
行号r 	sed -i '2r 2.txt' 1.txt 	在1.txt中第二行后面插入2.txt的内容
行号，行号r 	sed -i '2，5r 2.txt' 1.txt 	在1.txt中第二行到第五行每行后面插入一遍2.txt的内容
/正则/r 	sed -i '/^[0-9]/r 2.txt' 1.txt 	在1.txt中以数字开头的行后每行面插入一遍2.txt的内容
w 	sed '2w 3.txt' 1.txt 	在1.txt中第二行导出为3.txt的内容
w 	sed '2,5w 3.txt' 1.txt 	在1.txt中第二行到第五行导出3.txt的内容
/正则/r 	sed -i '/^[0-9]/w 2.txt' 1.txt 	在1.txt中以数字开头的行导出为3.txt的内容


##  选项参数  

常用选项:
## -n　　
使用安静（silent）模式。在一般sed的用法中，所有来自stdin的资料一般都会被列出到屏幕，但如果加上-n参数后，则只有经过sed特殊处理的那一行（或者command）才会被列出来。

## -e　　
允许多点编辑。

## -f　　
直接将sed的动作写在一个档案内，-f filename 则可以执行filename内的sed动作。

## -r　　
sed 的动作支援的是延伸型正规表示法的语法。(预设是基础正规表示法语法)

## -i　　
直接修改读取的档案内容，而不是由屏幕输出。

#  定位行command'
   通知sed处理那几行，并使用什么命令处理
   
# 正则表达式元字符：

 与grep一样，sed也支持特殊元字符，来进行模式查找、替换。不同的是，sed使用的正则表达式是括在斜杠线"/"之间的模式。

     元字符	            功能	                      示例
      ^	            行首定位符	                     /^my/  匹配所有以my开头的行
     
     $	              行尾定位符	                   /my$/  匹配所有以my结尾的行
     
     .	            匹配除换行符以外的单个字符	        /m..y/  匹配包含字母m，后跟两个任意字符，再跟字母y的行
     
     *	            匹配零个或多个前导字符	           /my*/  匹配包含字母m,后跟零个或多个y字母的行
    
     []	            匹配指定字符组内的任一字符	        /[Mm]y/  匹配包含My或my的行
    
     [^]	          匹配不在指定字符组内的任一字符	     /[^Mm]y/  匹配包含y，但y之前的那个字符不是M或m的行
      
      ..	          保存已匹配的字符	                1,20s/youself/\1r/  标记元字符之间的模式，并将其保存为标签1，之后可以使用\1来引用它。最多可以定义9个标签，从左边开始编号，最左边的是第一个。此例中，对第1到第20行进行处理，you被保存为标签1，如果发现youself，则替换为your。
     
     &	            保存查找串以便在替换串中引用	      s/my/**&**/  符号&代表查找串。my将被替换为**my**
    
      \<	           词首定位符	                    /\<my/  匹配包含以my开头的单词的行
      
      \>	          词尾定位符	                      /my\>/  匹配包含以my结尾的单词的行
      
      x\{m\}	      连续m个x	                       /9\{5\}/ 匹配包含连续5个9的行
      
      x\{m,\}	      至少m个x	                        /9\{5,\}/  匹配包含至少连续5个9的行
      
      x\{m,n\}	    至少m个，但不超过n个x	             /9\{5,7\}/  匹配包含连续5到7个9的行

   
